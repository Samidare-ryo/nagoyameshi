{# templates/pages/subscribe_cancel.html #}
{% extends "base.html" %}
{% load static %}
{% block title %}有料プラン解約 | NAGOYAMESHI{% endblock %}

{% block content %}
<main class="py-8 bg-gray-50 min-h-screen">
  <div class="container mx-auto px-4 md:px-0">
    <div class="max-w-2xl mx-auto">

      <!-- パンくず -->
      <nav class="mb-6 text-sm text-gray-500" aria-label="breadcrumb">
        <ol class="flex items-center space-x-2">
          <li><a href="{% url 'top_page' %}" class="hover:text-accent transition">ホーム</a></li>
          <li>/</li>
          <li class="text-gray-700">有料プラン解約</li>
        </ol>
      </nav>

      <!-- タイトル -->
      <h1 class="text-2xl font-bold text-center mb-6 text-gray-800">有料プラン即時解約</h1>

      <!-- 注意メッセージ -->
      <div class="bg-amber-50 border-l-4 border-amber-400 p-4 rounded-lg mb-6">
        <p class="text-gray-700 text-sm leading-relaxed">
          有料プランを解約すると、以下の特典を利用できなくなります。<br>
          本当に即時解約してもよろしいですか？
        </p>
      </div>

      <!-- 有料プランの内容 -->
      <div class="bg-white rounded-2xl shadow mb-6 overflow-hidden">
        <div class="bg-accent text-white text-center font-semibold py-3">有料プランの内容</div>
        <ul class="divide-y divide-gray-200 text-sm text-gray-700">
          <li class="p-3">・当日の2時間前までならいつでも予約可能</li>
          <li class="p-3">・店舗をお好きなだけお気に入りに追加可能</li>
          <li class="p-3">・レビューを全件閲覧可能</li>
          <li class="p-3">・レビューを投稿可能</li>
          <li class="p-3">・月額たったの300円</li>
        </ul>
      </div>

      <!-- サブスク情報 -->
      <div class="bg-white rounded-2xl shadow mb-6 overflow-hidden">
        <div class="bg-accent2 text-white text-center font-semibold py-3">現在のサブスクリプション情報</div>
        <ul class="divide-y divide-gray-200 text-sm text-gray-700">
          <li class="p-3">カード種類 : {{ user.stripe_card_brand }}</li>
          <li class="p-3">カード番号 : **** **** **** {{ user.stripe_card_last4 }}</li>
          <li class="p-3">カード有効期限 : {{ user.stripe_card_exp_month|stringformat:"02d" }} / {{ user.stripe_card_exp_year }}</li>
        </ul>
      </div>

      <!-- 解約フォーム -->
      <form id="card-form" method="post" class="text-center">
        {% csrf_token %}
        <button type="submit"
          class="w-1/2 bg-red-600 hover:bg-red-700 text-white font-semibold py-2.5 rounded-xl shadow-md transition">
          解約する
        </button>
      </form>

    </div>
  </div>
</main>
{% endblock %}
