{# templates/pages/subscribe_edit.html #}
{% extends "base.html" %}
{% load static %}
{% block title %}お支払い方法 | NAGOYAMESHI{% endblock %}

{% block content %}
<main class="py-8 bg-gray-50 min-h-screen">
  <div class="container mx-auto px-4 md:px-0">
    <div class="max-w-2xl mx-auto">

      <!-- パンくず -->
      <nav class="mb-6 text-sm text-gray-500" aria-label="breadcrumb">
        <ol class="flex items-center space-x-2">
          <li><a href="{% url 'top_page' %}" class="hover:text-accent transition">ホーム</a></li>
          <li>/</li>
          <li class="text-gray-700">お支払い方法</li>
        </ol>
      </nav>

      <!-- タイトル -->
      <h1 class="text-2xl font-bold text-center mb-6 text-gray-800">お支払い方法</h1>

      <!-- サブスクリプション情報 -->
      <div class="bg-white rounded-2xl shadow mb-6 overflow-hidden">
        <div class="bg-accent text-white text-center font-semibold py-3">現在のサブスクリプション情報</div>
        <ul class="divide-y divide-gray-200 text-sm text-gray-700">
          <li class="p-3">カード種類 : {{ user.stripe_card_brand }}</li>
          <li class="p-3">カード番号 : **** **** **** {{ user.stripe_card_last4 }}</li>
          <li class="p-3">カード有効期限 : {{ user.stripe_card_exp_month|stringformat:"02d" }} / {{ user.stripe_card_exp_year }}</li>
        </ul>
      </div>

      <!-- 注意書き -->
      <div class="bg-amber-50 border-l-4 border-amber-400 p-4 rounded-lg mb-6">
        <p class="text-gray-700 text-sm leading-relaxed">
          下記「変更」ボタンを押下すると、Stripeの決済情報変更画面に移動します。<br>
          クレジットカード情報を変更後、画面左上の「新規ビジネスに戻る」リンクをクリックしてください。
        </p>
      </div>

      <!-- 変更ボタン -->
      <form id="card-form" method="post" class="text-center">
        {% csrf_token %}
        <button type="submit"
          class="w-1/2 bg-accent hover:bg-accent2 text-white font-semibold py-2.5 rounded-xl shadow-md transition">
          変更
        </button>
      </form>

    </div>
  </div>
</main>
{% endblock %}
