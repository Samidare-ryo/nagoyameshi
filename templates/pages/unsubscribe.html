{# templates/pages/unsubscribe.html #}
{% extends "base.html" %}

{% block main %}
<div class="max-w-4xl mx-auto my-10 px-4">

  <h1 class="text-3xl font-bold mb-6 text-accent2">サブスク解除</h1>

  <!-- 成功 / エラーメッセージ -->
  {% if messages %}
    {% for message in messages %}
      <div class="mb-4 px-4 py-2 rounded-lg {% if message.tags == 'success' %}bg-blue-100 text-blue-800{% elif message.tags == 'error' %}bg-red-100 text-red-800{% endif %}">
        {{ message }}
      </div>
    {% endfor %}
  {% endif %}

  <div class="bg-blue-50 p-6 rounded-lg shadow mb-6">
    <p class="text-gray-700 mb-2">
      現在のサブスク契約を解除します。<br>
      解除後も契約期間中のお気に入り・予約はご利用できます。
    </p>
    <p class="text-gray-700">
      現在の契約有効期限: <span class="font-semibold text-accent2">{{ user.subscription_expiry|date:"Y/m/d" }}</span>
    </p>
  </div>

  <form method="post">
    {% csrf_token %}

    <!-- ボタン -->
    <div class="flex gap-2">
      <button type="submit" class="bg-accent2 text-white px-4 py-2 rounded-lg shadow hover:bg-accent2/80 transition">
        サブスク解除
      </button>
      <a href="{% url 'mypage' %}" class="border border-gray-500 text-gray-500 px-4 py-2 rounded-lg shadow hover:bg-gray-500 hover:text-white transition">
        キャンセル
      </a>
    </div>
  </form>

</div>
{% endblock %}
