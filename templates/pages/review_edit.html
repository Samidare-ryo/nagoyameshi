{# templates/pages/review_edit.html #}
{% extends "base.html" %}

{% block content %}
<div class="container mx-auto max-w-3xl py-8">
  <h2 class="text-2xl font-bold text-blue-700 mb-6">レビューを編集</h2>

  <form method="post" class="space-y-6 bg-blue-50 p-6 rounded-lg shadow">
    {% csrf_token %}

    <!-- 評価 -->
    <div>
      <label for="rating" class="block text-sm font-medium text-blue-800 mb-2">評価（1〜5）</label>
      <select id="rating" name="rating"
        class="w-full p-3 border border-blue-300 rounded-lg bg-blue-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
        {% for i in "12345" %}
          <option value="{{ forloop.counter }}" {% if review.rating == forloop.counter %}selected{% endif %}>
            {{ forloop.counter }}
          </option>
        {% endfor %}
      </select>
    </div>

    <!-- レビュー内容 -->
    <div>
      <label for="content" class="block text-sm font-medium text-blue-800 mb-2">レビュー内容</label>
      <textarea id="content" name="content" rows="6"
        class="w-full p-3 border border-blue-300 rounded-lg bg-blue-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
        required>{{ review.content }}</textarea>
    </div>

    <!-- 編集・キャンセルボタン -->
    <div class="flex gap-4">
      <button type="submit"
        class="px-6 py-3 rounded-lg bg-blue-600 text-white font-semibold shadow hover:bg-blue-700 transition">
        更新する
      </button>
      <a href="{% url 'review_list' %}"
        class="px-6 py-3 rounded-lg bg-gray-400 text-white font-semibold shadow hover:bg-gray-500 transition">
        キャンセル
      </a>
    </div>
  </form>

  <!-- 削除ボタン -->
  <form method="post" action="{% url 'review_delete' review.id %}" class="mt-6">
    {% csrf_token %}
    <button type="submit"
      class="w-full px-6 py-3 rounded-lg bg-red-600 text-white font-semibold shadow hover:bg-red-700 transition"
      onclick="return confirm('本当にこのレビューを削除しますか？');">
      このレビューを削除
    </button>
  </form>

</div>
{% endblock %}
